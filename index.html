<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ã®3åˆ†ã®1ãƒ©ãƒ³ãƒ€ãƒ é‹å‹¢ãƒ¡ãƒ¼ã‚«ãƒ¼</title>

<!-- OGP / SNSç”¨ã‚µãƒ ãƒè¨­å®š -->
<!-- ç”»åƒURL: https://s-prog990.github.io/shark-fortune/ogp.png -->

<meta property="og:title" content="ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ã®3åˆ†ã®1é‹å‹¢ãƒ¡ãƒ¼ã‚«ãƒ¼">
<meta property="og:description" content="ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ãŒ3ã¤ã®å§¿ã‹ã‚‰ä»Šæ—¥ã®é‹å‹¢ã‚’ãƒ©ãƒ³ãƒ€ãƒ è¨ºæ–­ã—ã¦ãã‚Œã‚‹ãŠéŠã³ãƒšãƒ¼ã‚¸ã€‚">
<meta property="og:type" content="website">
<meta property="og:image" content="https://s-prog990.github.io/shark-fortune/ogp.png">
<meta property="og:url" content="https://s-prog990.github.io/shark-fortune/">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ã®3åˆ†ã®1é‹å‹¢ãƒ¡ãƒ¼ã‚«ãƒ¼">
<meta name="twitter:description" content="3ã¤ã®ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ã‹ã‚‰ä»Šæ—¥ã®é‹å‹¢ã‚’ãƒ©ãƒ³ãƒ€ãƒ è¨ºæ–­ã€‚æˆé‡‘ï¼Ÿç¥ç¦ï¼Ÿãã‚Œã¨ã‚‚â€¦ï¼Ÿ">

</head>


<style>
body {
    background: #f3e9d7;
    font-family: "Hiragino Maru Gothic ProN", system-ui, sans-serif;
    text-align: center;
    padding-top: 40px;
    margin: 0;
}

h1 {
    font-size: 26px;
    margin-bottom: 8px;
}

#subtitle {
    font-size: 14px;
    color: #775;
    margin-bottom: 20px;
}

#controls {
    margin-bottom: 12px;
}

button {
    font-size: 18px;
    padding: 10px 22px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #ffd45e;
    box-shadow: 0 3px 0 #c9a842;
    margin: 4px;
}
button:hover {
    background: #ffcc3f;
}
button:disabled {
    opacity: 0.6;
    cursor: default;
    box-shadow: none;
}

#result-card {
    width: 340px;
    margin: 0 auto;
    margin-top: 16px;
    padding: 16px 10px 20px;
    border-radius: 18px;
    background: #fff7e6;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    transition: background 0.4s ease;
}

#result-img {
    width: 260px;
    height: 260px;
    object-fit: contain;
    border-radius: 20px;
    display: none;
}

#fortune-name {
    font-size: 18px;
    margin-top: 10px;
    font-weight: bold;
}

#fortune-text {
    font-size: 16px;
    margin-top: 6px;
    min-height: 44px;
}

#lucky-item {
    font-size: 15px;
    margin-top: 10px;
    color: #555;
}

#status {
    font-size: 13px;
    margin-top: 6px;
    color: #996;
    min-height: 18px;
}

/* å½“ãŸã‚Šæ™‚ã®å…‰ã‚‹æ¼”å‡º */
.hit-glow {
    animation: glow 0.8s ease-out;
}
@keyframes glow {
    0%   { transform: scale(1);   box-shadow: 0 0 0 rgba(255, 230, 120, 0.0); }
    40%  { transform: scale(1.06); box-shadow: 0 0 30px rgba(255, 230, 120, 0.9); }
    100% { transform: scale(1);   box-shadow: 0 0 0 rgba(255, 230, 120, 0.0); }
}

/* Xãƒœã‚¿ãƒ³ã£ã½ã„è‰² */
#share-x {
    background: #111;
    color: #fff;
    box-shadow: 0 3px 0 #000;
}
#share-x:hover {
    background: #222;
}

footer {
    font-size: 11px;
    color: #999;
    margin-top: 18px;
}

/* ã‚¹ãƒãƒ›å‘ã‘èª¿æ•´ */
@media (max-width: 480px) {
    body {
        padding-top: 24px;
    }
    #result-card {
        width: 90%;
        padding: 14px 8px 18px;
    }
    #result-img {
        width: 80%;
        height: auto;
    }
    button {
        width: 80%;
        max-width: 320px;
    }
}
</style>
</head>
<body>

<h1>ğŸ”® ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ã®3åˆ†ã®1é‹å‹¢ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>
<div id="subtitle">ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€3ã¤ã®å§¿ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§ä»Šæ—¥ã®é‹å‹¢ãŒæ±ºã¾ã‚‹ã‚ˆã€‚</div>

<div id="controls">
    <button id="btn-fortune" onclick="drawFortune()">é‹å‹¢ã‚’å ã†ï¼</button>
    <button id="share-x" onclick="shareOnX()">Xã§çµæœã‚’ã‚·ã‚§ã‚¢</button>
</div>

<div id="result-card">
    <img id="result-img" src="" alt="result">
    <div id="fortune-name"></div>
    <div id="fortune-text"></div>
    <div id="lucky-item"></div>
    <div id="status"></div>
</div>

<footer>â€»éŸ³ãŒå‡ºã‚‹ã®ã§éŸ³é‡ã«æ³¨æ„ã—ã¦ã­ï¼ˆSunoè£½SEæ¨å¥¨ï¼‰</footer>

<!-- Suno ã§ä½œã£ãŸ SE ã‚’ã“ã“ã«ç½®ã -->
<audio id="se-spin" src="roulette_spin.mp3" preload="auto"></audio>
<audio id="se-hit"  src="roulette_hit.mp3"  preload="auto"></audio>

<script>
// â˜… ã‚ãªãŸã®ä¸–ç•Œè¦³ã«åˆã‚ã›ãŸé‹å‹¢å®šç¾©
// å…ˆé ­3ã¤ãŒé€šå¸¸ã€æœ€å¾Œã®1ã¤ãŒè¶…ãƒ¬ã‚¢ï¼ˆå‡ºç¾1%ï¼‰
const fortunes = [
    {
        name: "ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ã‚·ãƒ£ãƒ¼ã‚¯ï¼ˆType Aï¼‰",
        img: "æ‚ªé­”.png",
        messages: [
            "ä»Šæ—¥ã¯ä½•ã‹ã„ã¤ã‚‚ä»¥ä¸Šã«æ³¨æ„ã—ãŸæ–¹ãŒã‚ˆã•ã’ã€‚èƒŒå¾Œã‹ã‚‰åå‰ã‚’å‘¼ã°ã‚Œã¦ã‚‚æŒ¯ã‚Šè¿”ã£ã¡ã‚ƒãƒ€ãƒ¡ã€‚",
            "æ°—é…ãŒä¸€ç¬å¼·ã„æ—¥ã€‚æ°—ã«ãªã‚‹å ´æ‰€ã«ã¯è¿‘ã¥ã‹ãšã€å…‰ã®ã‚ã‚‹æ–¹å‘ã¸ã€‚",
            "ç›´æ„ŸãŒä¸ç©ã‚’å¯ŸçŸ¥ã—ã¦ã‚‹ã‹ã‚‚ã€‚ã€å±ãªãã†ã€ã¨æ€ã£ãŸã‚‰å³é€€é¿ã€‚",
            "ãªãœã‹ä»Šæ—¥ã¯â€œç‰©â€ãŒè½ã¡ã‚„ã™ã„æ—¥ã€‚è½ã¨ã—ãŸã‚‰æ‹¾ã†å‰ã«ä¸€å›è¦‹ã¤ã‚ã¦ã€‚",
            "ã‚ãªãŸã®å½±ãŒå°‘ã—é•·ããªã‚‹æ—¥ã€‚å½±ã®æ–¹ã¯ã‚ã¾ã‚Šè¦‹ã¤ã‚ãªã„ã§ãŠã“ã†ã€‚"
        ],
        luckies: [
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šå…‰ã‚‹çŸ³",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šå¤ã³ãŸéˆ´",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šèµ¤ã„ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šé»’ç³–ã‚­ãƒ£ãƒ³ãƒ‡ã‚£ãƒ¼ï¼ˆè½ã¡ç€ãï¼‰",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šé€†å‘ãã«ç½®ã„ãŸãŠå®ˆã‚Š"
        ],
        bgColor: "#ffe5e5",
        share: "ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³å ã„ï¼šãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ã‚·ãƒ£ãƒ¼ã‚¯ã®é‹å‹¢ã‚’å¼•ãã¾ã—ãŸã€‚"
    },
    {
        name: "ã‚´ãƒ¼ãƒ«ãƒ‰ã‚·ãƒ£ãƒ¼ã‚¯ï¼ˆType Bï¼‰",
        img: "é‡‘ã®äº¡è€….png",
        messages: [
            "ã‚ãªãŸã¯ä»Šæ—¥ã‚‚é‡‘ã®äº¡è€…ã€‚è²¡å¸ƒãŒè»½ããªã‚‹å‰å…†ã‚ã‚Šã€æ…é‡ã«ã€‚",
            "æ¬²æœ›ã‚²ãƒ¼ã‚¸ãŒé€šå¸¸ã‚ˆã‚Š3å€å¢—ã—ã€‚ç„¡é§„é£ã„ã«æ°—ã‚’ã¤ã‘ã‚ˆã†ã€‚",
            "ã¤ã„æ•£è²¡ã—ãã†ã€‚ã€ã¾ã‚ã„ã£ã‹ã€ã¯ç¦å¥ã®æ—¥ã€‚",
            "ä»Šæ—¥ã¯â€œãŠå¾—â€ã¨ã„ã†è¨€è‘‰ã«å¼±ã„æ—¥ã€‚è½ã¡ç€ã„ã¦æ·±å‘¼å¸ã—ã‚ˆã†ã€‚",
            "è²·ã‚ãªã„äºˆå®šã®ç‰©ã»ã©å‘¼ã‚“ã§ãã‚‹æ—¥ã€‚èª˜æƒ‘ã«å‹ã¦ã°é‹æ°—UPã€‚"
        ],
        luckies: [
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šç¡¬è²¨ã‚’1æšã ã‘æŒã¤",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šã‚­ãƒ©ã‚­ãƒ©ã—ãŸå°ç‰©",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šé‡‘è‰²ã®ç´™ç‰‡ï¼ˆãªã‚“ã§ã‚‚å¯ï¼‰",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šç¯€ç´„ã‚¢ãƒ—ãƒªã‚’é–‹ãã“ã¨",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šãƒŸãƒ‹è²¡å¸ƒ"
        ],
        bgColor: "#fff4bf",
        share: "ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³å ã„ï¼šã‚´ãƒ¼ãƒ«ãƒ‰ã‚·ãƒ£ãƒ¼ã‚¯ã®é‹å‹¢ã‚’å¼•ãã¾ã—ãŸã€‚"
    },
    {
        name: "ãƒ–ãƒ¬ã‚¹ã‚·ãƒ£ãƒ¼ã‚¯ï¼ˆType Cï¼‰",
        img: "ç¥ç¦ã®å¥³ç¥.png",
        messages: [
            "ç¾ã—ã„ã‚ªãƒ¼ãƒ©ãŒå‡ºã¦ã„ã¦ã€ä»Šæ—¥ã¯ã„ã¤ã‚‚ä»¥ä¸Šã«ä¹—ã£ã¦è¡Œã‘ã¾ã™ï¼",
            "æ°—æŒã¡ãŒè»½ããªã‚‹æ—¥ã€‚äººã«å„ªã—ãã™ã‚‹ã¨å€è¿”ã—ã§ç¦ãŒè¿”ã£ã¦ãã‚‹ã‚ˆã€‚",
            "ã‚ãªãŸã®é›°å›²æ°—ãŒã‚„ã‚ã‚‰ã‹ã„å…‰ã«åŒ…ã¾ã‚Œã‚‹æ—¥ã€‚ã‚„ã•ã—ã•ãŒå‰ã€‚",
            "èª°ã‹ã‚’åŠ©ã‘ã‚‹ã¨è‡ªåˆ†ã«ã‚‚è‰¯ã„é¢¨ãŒå¹ããã†ã€‚",
            "ä»Šæ—¥ã¯ã€ã‚ã‚ŠãŒã¨ã†ã€ã‚’è¨€ã†å›æ•°ãŒå¤šã„ã»ã©é‹æ°—UPã€‚"
        ],
        luckies: [
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šäº¤æµï¼ˆä¼šè©±ã™ã‚‹ã¨å‰ï¼‰",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šé¦™ã‚Šã®è‰¯ã„é£²ã¿ç‰©",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šæ·¡ã„è‰²ã®æœ",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šå„ªã—ã„éŸ³æ¥½",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šç´™ã®æ‰‹å¸³"
        ],
        bgColor: "#e9f5ff",
        share: "ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³å ã„ï¼šãƒ–ãƒ¬ã‚¹ã‚·ãƒ£ãƒ¼ã‚¯ã®é‹å‹¢ã‚’å¼•ãã¾ã—ãŸã€‚"
    },
    // â˜… è¶…ãƒ¬ã‚¢ï¼ˆ1%ï¼‰ã‚·ãƒ£ãƒ¼ã‚¯è¦šé†’ã€‚ä»Šã¯ç¥ç¦ç”»åƒã‚’æµç”¨ã€ã‚ã¨ã§å°‚ç”¨ã‚¤ãƒ©ã‚¹ãƒˆã«å·®ã—æ›¿ãˆã¦OK
    {
        name: "ã‚·ãƒ£ãƒ¼ã‚¯è¦šé†’ï¼ˆType S / ãƒ¬ã‚¢ï¼‰",
        img: "Sãƒ¬ã‚¢.png",
        messages: [
            "æ·±æ·µã‹ã‚‰åŠ›ã‚’å¼•ãå‡ºã™æ—¥ã€‚å¤§ããªæ±ºæ–­ã‚‚å‰å‘ãã«æ¤œè¨ã—ã¦è‰¯ã•ãã†ã€‚",
            "ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³ã¨æ³¢é•·ãŒã‚·ãƒ³ã‚¯ãƒ­ä¸­ã€‚ã‚„ã‚ŠãŸã„ã“ã¨ã‚’ä¸€æ­©ã ã‘å‰ã«é€²ã‚ã¦ã¿ã¦ã€‚",
            "ä»Šæ—¥ã¯â€œã“ã“ãâ€ã®å‹è² é‹ãŒå…‰ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‚ç„¡èŒ¶ã¯ã›ãšã€ç‹™ã„ã‚’å®šã‚ã¦ã€‚"
        ],
        luckies: [
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šã„ã¤ã‚‚ã‚ˆã‚Šå°‘ã—ç‰¹åˆ¥ãªä¸€æ¯",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šæ–°ã—ãé–‹ã„ãŸãƒ¡ãƒ¢å¸³ã®1ãƒšãƒ¼ã‚¸ç›®",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼šæ·±å‘¼å¸3å›ã¨å°ã•ãªã‚¬ãƒƒãƒ„ãƒãƒ¼ã‚º"
        ],
        bgColor: "#ffe8ff",
        share: "ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³å ã„ï¼šè¶…ãƒ¬ã‚¢ãƒ»ã‚·ãƒ£ãƒ¼ã‚¯è¦šé†’ï¼ˆType Sï¼‰ã‚’å¼•ãã¾ã—ãŸï¼"
    }
];

let lastFortune = null;      // Xã‚·ã‚§ã‚¢ç”¨
let lastFortuneIndex = null; // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç”¨
let rouletteTimer = null;    // ç‚¹æ»…ç”¨ã‚¿ã‚¤ãƒãƒ¼

// ãƒ©ãƒ³ãƒ€ãƒ ã§é€šå¸¸3ç¨®ï¼‹1%ã§ãƒ¬ã‚¢ã‚’è¿”ã™
function pickRandomIndex() {
    const rareIndex = fortunes.length - 1;   // æœ€å¾Œã‚’ãƒ¬ã‚¢æ‰±ã„
    const normalCount = fortunes.length - 1; // å…ˆé ­ï½ãƒ¬ã‚¢ç›´å‰ãŒé€šå¸¸

    const r = Math.random();
    if (fortunes.length >= 4 && r < 0.01) {
        return rareIndex; // 1%ãƒ¬ã‚¢
    } else {
        return Math.floor(Math.random() * normalCount); // é€šå¸¸
    }
}

// ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰ã€å®Ÿéš›ã«è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»˜ãã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹
function resolveFortune(index) {
    const f = fortunes[index];
    const msg   = f.messages[Math.floor(Math.random() * f.messages.length)];
    const lucky = f.luckies[Math.floor(Math.random() * f.luckies.length)];
    return { ...f, msg, lucky, index };
}

// ç”»é¢ã«çµæœã‚’åæ˜ ã™ã‚‹å…±é€šå‡¦ç†
function renderFortune(result, options = {}) {
    const { playHitSound = true, viaShareLink = false } = options;

    const img = document.getElementById("result-img");
    const nameEl = document.getElementById("fortune-name");
    const textEl = document.getElementById("fortune-text");
    const luckyEl = document.getElementById("lucky-item");
    const statusEl = document.getElementById("status");
    const card = document.getElementById("result-card");

    img.src = result.img;
    img.style.display = "block";
    nameEl.textContent = result.name;
    textEl.textContent = result.msg;
    luckyEl.textContent = result.lucky;
    card.style.background = result.bgColor;
    statusEl.textContent = viaShareLink ? "ã‚·ã‚§ã‚¢ã•ã‚ŒãŸçµæœã‚’è¡¨ç¤ºä¸­ï¼" : "çµæœãŒå‡ºã¾ã—ãŸï¼";

    img.classList.remove("hit-glow");
    void img.offsetWidth; // reflow
    img.classList.add("hit-glow");

    if (playHitSound) {
        const seHit  = document.getElementById("se-hit");
        try {
            seHit.currentTime = 0;
            seHit.play();
        } catch(e) {}
    }
}

function drawFortune() {
    const btn = document.getElementById("btn-fortune");
    const img = document.getElementById("result-img");
    const nameEl = document.getElementById("fortune-name");
    const textEl = document.getElementById("fortune-text");
    const luckyEl = document.getElementById("lucky-item");
    const statusEl = document.getElementById("status");
    const card = document.getElementById("result-card");

    // ãƒœã‚¿ãƒ³é€£æ‰“é˜²æ­¢
    btn.disabled = true;
    statusEl.textContent = "ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆå›è»¢ä¸­â€¦";
    luckyEl.textContent = "";
    nameEl.textContent = "";
    textEl.textContent = "";

    // è¦‹ãŸç›®ãƒªã‚»ãƒƒãƒˆ
    card.style.background = "#fff7e6";
    img.classList.remove("hit-glow");
    img.style.display = "block";

    // SEå†ç”Ÿï¼ˆå›è»¢éŸ³ï¼‰
    const seSpin = document.getElementById("se-spin");
    const seHit  = document.getElementById("se-hit");
    try {
        seHit.pause();
        seHit.currentTime = 0;
        seSpin.currentTime = 0;
        seSpin.play();
    } catch(e) {}

    // â˜… ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé«˜é€Ÿç‚¹æ»…ï¼ˆç´„1.2ç§’ï¼‰
    let idx = 0;
    const flashInterval = 90;   // ms
    const flashDuration = 1200; // ms

    if (rouletteTimer) clearInterval(rouletteTimer);
    rouletteTimer = setInterval(() => {
        const f = fortunes[idx % fortunes.length];
        img.src = f.img;
        idx++;
    }, flashInterval);

    // ä¸€å®šæ™‚é–“å¾Œã«æœ¬å½“ã®çµæœã‚’æŠ½é¸ã—ã¦åœæ­¢
    setTimeout(() => {
        clearInterval(rouletteTimer);
        rouletteTimer = null;

        const index = pickRandomIndex();
        const result = resolveFortune(index);

        lastFortune = result;
        lastFortuneIndex = index;

        // å›è»¢éŸ³åœæ­¢ â†’ å½“ãŸã‚ŠéŸ³å†ç”Ÿã¯ renderFortune å†…ã§
        try {
            seSpin.pause();
            seSpin.currentTime = 0;
        } catch(e) {}

        renderFortune(result, { playHitSound: true, viaShareLink: false });

        // å°‘ã—å¾…ã£ã¦ã‹ã‚‰ãƒœã‚¿ãƒ³å†ã³æŠ¼ã›ã‚‹ã‚ˆã†ã«
        setTimeout(() => { btn.disabled = false; }, 300);
    }, flashDuration);
}

// Xï¼ˆTwitterï¼‰ã§ã‚·ã‚§ã‚¢
// Xï¼ˆTwitterï¼‰ã§ã‚·ã‚§ã‚¢ï¼ˆèª­ã¿ã‚„ã™ã„æ”¹è¡Œã¤ãï¼‰
function shareOnX() {
    if (!lastFortune) {
        alert("å ã„çµæœã‚’å…ˆã«å‡ºã—ã¦ã­ï¼");
        return;
    }

    const imgURL = "https://s-prog990.github.io/shark-fortune/" + lastFortune.img;

    const text = lastFortune.share + " #ã‚·ãƒ£ãƒ¼ã‚¯å·«å¥³å ã„";
    const shareUrl =
        "https://twitter.com/intent/tweet?text=" +
        encodeURIComponent(text) +
        "&url=" +
        encodeURIComponent(imgURL);

    window.open(shareUrl, "_blank");
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ï¼šURLã« ?f= ãŒã‚ã‚Œã°ã€ãã®çµæœã‚’è¡¨ç¤º
window.addEventListener("DOMContentLoaded", () => {
    const params = new URLSearchParams(location.search);
    const fParam = params.get("f");
    if (fParam !== null) {
        const index = parseInt(fParam, 10);
        if (!Number.isNaN(index) && index >= 0 && index < fortunes.length) {
            const result = resolveFortune(index);
            lastFortune = result;
            lastFortuneIndex = index;
            renderFortune(result, { playHitSound: false, viaShareLink: true });
        }
    }
});
</script>

</body>
</html>





